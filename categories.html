<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Categories | Mcland Pharma</title>
    <link rel="stylesheet" href="./assets/css/navbar_footer.css" />
    <link rel="stylesheet" href="./assets/css/categories.css" />
    <style>
      /* Product Grid Layout */
#product-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 40px; /* Increased gap between cards */
  padding: 30px 60px;
  background: #f9f9f9;
}

/* Product Card Base */
.product-card {
  position: relative;
  width: 100%;
  height: 220px;
  perspective: 1500px; /* Increased perspective for better 3D effect */
  margin: 0 auto; /* Center cards in grid cells */
  background: #fff;
  border: 1px solid #ddd;
  border-radius: 10px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  transform-style: preserve-3d;
  transition: all 0.6s ease; /* Slowed down transition for smoother flip */
}

.product-card:hover {
  transform: rotateY(180deg);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
}

/* Card front and back faces */
.card-front, .card-back {
  position: absolute;
  top: 0;
  left: 0;
  /* width: 100%; */
  height: 90%;
  backface-visibility: hidden;
  border-radius: 10px;
  overflow: hidden;
}

/* Front face styling */
.card-front {
  display: flex;
  justify-content: space-around;
  padding: 10px;
  z-index: 2;
  background: #fff;
}

/* Back face styling - fixed visibility issue */
.card-back {
  width: auto;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 20px;
  background: #fff;
  transform: rotateY(180deg);
  z-index: 1;
  overflow-y: auto; /* Enable vertical scrolling */
  scrollbar-width: thin; /* Firefox */
  scrollbar-color: #ff7f50 #f0f0f0; /* Firefox */
}
.card p {
  padding: auto;
  width: auto;
}

/* Product Image */
.product-card img {
  width: 200px;
  height: 200px;
  object-fit: cover;
  border-radius: 5px;
  margin-right: 15px; /* Space between image and details */
}

/* Product Details */
.product-details {

  display: flex;
  flex-direction: column; /* Align content vertically */
  justify-content: center;
}

.product-details h3 {
  font-size: 16px;
  font-weight: bold;
  color: #333;
  margin-bottom: 5px;
}

.product-details .price {
  font-size: 14px;
  font-weight: bold;
  color: #ff6347;
  margin-bottom: 10px;
}

/* Buttons */
.product-buttons {
  display: flex;
  gap: 10px;
}

.buy-btn, .cart-btn {
  background: #ff7f50;
  color: #fff;
  border: none;
  padding: 8px 12px;
  font-size: 12px;
  font-weight: bold;
  border-radius: 25px;
  cursor: pointer;
  transition: background 0.3s ease, box-shadow 0.3s ease;
}

.buy-btn:hover, .cart-btn:hover {
  background: #ff4500;
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
}

.buy-btn a {
  color: white;
  text-decoration: none;
}

/* Back side additional styles */
.card-back h3 {
  font-size: 18px;
  font-weight: bold;
  color: #333;
  margin-bottom: 15px;
}

.card-back p {
  text-align: center;
  margin-bottom: 10px;
  color: #555;
  max-width: 90%;
}

.card-back .buy-btn {
  margin-top: 10px;
}
      </style>
  </head>
  <body>
    <header class="navbar">
      <div class="navbar-top">
        <div
          class="logo"
          onclick="this.querySelector('a').click(); return true;"
        >
          <img src="./assets/image2/logo.png" alt="MCland Pharma Logo" />
          <a href="./index.html"></a>
        </div>
        <!-- <div class="delivery">
            <span>Deliver to <strong>110002</strong></span>
          </div> -->
        <div class="navbar-top-right">
          <!-- <div class="search-bar">
              <input type="text" placeholder="Search for medicine...">
            </div> -->
          <div class="actions">
            <!-- <button>Upload</button> -->

            <button type="button">
              <a class="a Cart" href="./cart.html"
                ><img
                  src="https://cdn-icons-png.flaticon.com/512/3144/3144456.png"
                  alt="Cart"
                  class="cart-icon"
              /></a>
            </button>
            <button type="button">
              <a class="a signin_signup" href="#">Sign in / Sign up</a>
            </button>
          </div>
        </div>
      </div>
    </header>

    <!-- Filter and Search Section -->
    <div class="filter-search">
      <div class="search-bar">
        <input
          type="text"
          id="searchInput"
          placeholder="Search for medicines..."
        />
        <button onclick="searchMedicines()">Search</button>
      </div>
      <div class="filter-options">
        <label for="categories">Filter by Category:</label>
        <select id="categories" onchange="filterCategory()">
          <option value="all">All Categories</option>
          <option value="1">USA Premium</option>
          <option value="2">General Health Care</option>
          <option value="3">Pain Medication</option>
          <option value="4">Cardiac Care</option>
          <option value="5">Mental Health</option>
          <option value="6">Sexual Wellness</option>
          <option value="7">Skincare</option>
          <option value="8">Steroids</option>
          <option value="9">Women's Health</option>
          <option value="10">Men's Health</option>
        </select>
      </div>
    </div>

    <section id="product-grid">
      <!-- <script>
        async function loadSheetData() {
          
          const sheetID = "1XVbrA6eUv85eOoJO6mziJ35LI8x2copV_ka7qil2ycU"; // Replace with your Sheet ID
          const apiKey = "AIzaSyD7mumdGgofUc1DE_bgaYJtOKK4i421iA8"; // Replace with your Google API Key
          
          const range2 = "Sheet1!Y5:AF"; 
          const range = "Sheet1!A5:V"; // Adjust based on your data range
          const url2 = `https://sheets.googleapis.com/v4/spreadsheets/${sheetID}/values/${range2}?key=${apiKey}`;
          const url = `https://sheets.googleapis.com/v4/spreadsheets/${sheetID}/values/${range}?key=${apiKey}`;

          const category = document.getElementById('categories').value;
          console.log("this is the option chosen",category);
          try {
            const response2 = await fetch(url2);
            const data2 = await response2.json();

            const response = await fetch(url);
            const data = await response.json();

            if (!data.values || !data2.values) {
              throw new Error("No data found in the specified range.");
            }

            const rows = data.values;
            const row2 = data2.values;

            const tableBody = document.getElementById("product-grid");
            tableBody.innerHTML = ""; // Clear table

            rows.forEach((row) => {
              const productID = row[0]; 
              let price=0;
              let p=0;
              row2.forEach((row2)=>{
                if(row2[1] == row[0] && p == 0){
                  price = row2[6];
                  p=p+1;
                }
              });

              
              
              const rowHTML = `
              <div class="product-card medicine-card ${row[1] || "all"}">
              <img src="${row[15] || ""}" alt="Product 1" />
              <div class="product-details">
              <h3>${row[2] || ""}</h3>
              <p class="price">${price}</p>
              <div class="product-buttons">
              <button class="buy-btn"><a href="./product_overview.html?product_ID=${productID}">Buy</a></button>
              <button class="cart-btn">Add to Cart</button>
              </div>
             </div>
             </div>
        `
        ;

              tableBody.innerHTML += rowHTML;
            });
          } catch (error) {
            console.error("Error fetching data:", error);
          }
        }

        loadSheetData();
      </script>  -->
      <!-- <script>
        async function loadSheetData() {
          const sheetID = "1XVbrA6eUv85eOoJO6mziJ35LI8x2copV_ka7qil2ycU"; // Replace with your Sheet ID
          const apiKey = "AIzaSyD7mumdGgofUc1DE_bgaYJtOKK4i421iA8"; // Replace with your Google API Key
          const range2 = "Sheet1!Y5:AF";
          const range = "Sheet1!A5:V";
  
          const url2 = `https://sheets.googleapis.com/v4/spreadsheets/${sheetID}/values/${range2}?key=${apiKey}`;
          const url = `https://sheets.googleapis.com/v4/spreadsheets/${sheetID}/values/${range}?key=${apiKey}`;
  
          try {
            const response2 = await fetch(url2);
            const data2 = await response2.json();
            const response = await fetch(url);
            const data = await response.json();
  
            if (!data.values || !data2.values) {
              throw new Error("No data found in the specified range.");
            }
  
            const rows = data.values;
            const row2 = data2.values;
  
            const tableBody = document.getElementById("product-grid");
            const loadingMessage = document.getElementById("loading-message");
  
            loadingMessage.innerText = "LOADING FIRST 20 PRODUCTS...";
            displayBatch(rows, row2, 0, 20, tableBody);
  
            let start = 20;
            while (start < rows.length) {
              loadingMessage.innerText = `LOADING NEXT 20 PRODUCTS (${start + 1}/${rows.length})...`;
              await new Promise((resolve) => setTimeout(resolve, 500)); // Simulate delay for smoother loading
              displayBatch(rows, row2, start, start + 20, tableBody);
              start += 20;
            }
  
            loadingMessage.style.display = "none"; // Hide loading message when all rows are loaded
          } catch (error) {
            console.error("Error fetching data:", error);
          }
        }
  
        function displayBatch(rows, row2, start, end, tableBody) {
          const batch = rows.slice(start, end);
  
          batch.forEach((row) => {
            const productID = row[0];
            let price = 0;
  
            row2.forEach((r2) => {
              if (r2[1] === row[0]) {
                price = r2[6];
              }
            });
  
            const rowHTML = `
              <div class="product-card medicine-card ${row[1] || "all"}">
                <img src="${row[15] || ""}" alt="Product Image" />
                <div class="product-details">
                  <h3>${row[2] || "No Description"}</h3>
                  <p class="price">${price || "Price not available"}</p>
                  <div class="product-buttons">
                    <button class="buy-btn"><a href="./product_overview.html?product_ID=${productID}">Buy</a></button>
                    <button class="cart-btn">Add to Cart</button>
                  </div>
                </div>
              </div>
            `;
  
            tableBody.innerHTML += rowHTML;
          });
        }
  
        loadSheetData();
      </script> -->
      <!-- <script>
        async function loadSheetData() {
          const sheetID = "1XVbrA6eUv85eOoJO6mziJ35LI8x2copV_ka7qil2ycU"; // Replace with your Sheet ID
          const apiKey = "AIzaSyD7mumdGgofUc1DE_bgaYJtOKK4i421iA8"; // Replace with your Google API Key
          const range2 = "Sheet1!Y5:AF";
          const range = "Sheet1!A5:V";
  
          const url2 = `https://sheets.googleapis.com/v4/spreadsheets/${sheetID}/values/${range2}?key=${apiKey}`;
          const url = `https://sheets.googleapis.com/v4/spreadsheets/${sheetID}/values/${range}?key=${apiKey}`;
  
          // Get the category ID from the URL
          const urlParams = new URLSearchParams(window.location.search);
          const categoryID = urlParams.get("catogeries_ID");
          console.log("Selected Category ID:", categoryID);
  
          try {
            const response2 = await fetch(url2);
            const data2 = await response2.json();
            const response = await fetch(url);
            const data = await response.json();
  
            if (!data.values || !data2.values) {
              throw new Error("No data found in the specified range.");
            }
  
            const rows = data.values;
            const row2 = data2.values;
  
            const tableBody = document.getElementById("product-grid");
            const loadingMessage = document.getElementById("loading-message");
  
            loadingMessage.innerText = "LOADING PRODUCTS...";
            
            // Filter rows based on the selected category ID
            const filteredRows = categoryID
              ? rows.filter((row) => row[1] === categoryID)
              : rows;
  
            if (filteredRows.length === 0) {
              tableBody.innerHTML = `<p>No products found for the selected category.</p>`;
              loadingMessage.style.display = "none";
              return;
            }
  
            displayBatch(filteredRows, row2, 0, 20, tableBody);
  
            let start = 20;
            while (start < filteredRows.length) {
              loadingMessage.innerText = `LOADING NEXT 20 PRODUCTS (${start + 1}/${filteredRows.length})...`;
              await new Promise((resolve) => setTimeout(resolve, 500)); // Simulate delay for smoother loading
              displayBatch(filteredRows, row2, start, start + 20, tableBody);
              start += 20;
            }
  
            loadingMessage.style.display = "none"; // Hide loading message when all rows are loaded
          } catch (error) {
            console.error("Error fetching data:", error);
          }
        }
  
        function displayBatch(rows, row2, start, end, tableBody) {
          const batch = rows.slice(start, end);
  
          batch.forEach((row) => {
            const productID = row[0];
            let price = 0;
  
            row2.forEach((r2) => {
              if (r2[1] === row[0]) {
                price = r2[6];
              }
            });
  
            const rowHTML = `
              <div class="product-card medicine-card ${row[1] || "all"}">
                <img src="${row[15] || ""}" alt="Product Image" />
                <div class="product-details">
                  <h3>${row[2] || "No Description"}</h3>
                  <p class="price">${price || "Price not available"}</p>
                  <div class="product-buttons">
                    <button class="buy-btn"><a href="./product_overview.html?product_ID=${productID}">Buy</a></button>
                    <button class="cart-btn">Add to Cart</button>
                  </div>
                </div>
              </div>
            `;
  
            tableBody.innerHTML += rowHTML;
          });
        }
  
        loadSheetData();
      </script> -->
      <!-- <script>
      // Fetch data based on category from URL
      async function loadSheetData() {
        const sheetID = "1XVbrA6eUv85eOoJO6mziJ35LI8x2copV_ka7qil2ycU"; // Replace with your Sheet ID
        const apiKey = "AIzaSyD7mumdGgofUc1DE_bgaYJtOKK4i421iA8"; // Replace with your Google API Key
        const range2 = "Sheet1!Y5:AF";
        const range = "Sheet1!A5:V";

        const url2 = `https://sheets.googleapis.com/v4/spreadsheets/${sheetID}/values/${range2}?key=${apiKey}`;
        const url = `https://sheets.googleapis.com/v4/spreadsheets/${sheetID}/values/${range}?key=${apiKey}`;

        // Get the category ID from the URL
        const urlParams = new URLSearchParams(window.location.search);
        const categoryID = urlParams.get("categories_ID");
        console.log("Selected Category ID:", categoryID);

        try {
          const response2 = await fetch(url2);
          const data2 = await response2.json();
          const response = await fetch(url);
          const data = await response.json();

          if (!data.values || !data2.values) {
            throw new Error("No data found in the specified range.");
          }

          const rows = data.values;
          const row2 = data2.values;

          const tableBody = document.getElementById("product-grid");
          const loadingMessage = document.getElementById("loading-message");

          loadingMessage.innerText = "LOADING PRODUCTS...";
          
          // Filter rows based on the selected category ID
          const filteredRows = categoryID && categoryID !== "all"
            ? rows.filter((row) => row[1] === categoryID)
            : rows;

          if (filteredRows.length === 0) {
            tableBody.innerHTML = `<p>No products found for the selected category.</p>`;
            loadingMessage.style.display = "none";
            return;
          }

          displayBatch(filteredRows, row2, 0, 20, tableBody);

          let start = 20;
          while (start < filteredRows.length) {
            loadingMessage.innerText = `LOADING NEXT 20 PRODUCTS (${start + 1}/${filteredRows.length})...`;
            await new Promise((resolve) => setTimeout(resolve, 500)); // Simulate delay for smoother loading
            displayBatch(filteredRows, row2, start, start + 20, tableBody);
            start += 20;
          }

          loadingMessage.style.display = "none"; // Hide loading message when all rows are loaded
        } catch (error) {
          console.error("Error fetching data:", error);
        }
      }

      // Display a batch of rows
      function displayBatch(rows, row2, start, end, tableBody) {
        const batch = rows.slice(start, end);

        batch.forEach((row) => {
          const productID = row[0];
          let price = 0;

          row2.forEach((r2) => {
            if (r2[1] === row[0]) {
              price = r2[6];
            }
          });

          const rowHTML = `
            <div class="product-card medicine-card ${row[1] || "all"}">
              <img src="${row[15] || ""}" alt="Product Image" />
              <div class="product-details">
                <h3>${row[2] || "No Description"}</h3>
                <p class="price">${price || "Price not available"}</p>
                <div class="product-buttons">
                  <button class="buy-btn"><a href="./product_overview.html?product_ID=${productID}">Buy</a></button>
                  <button class="cart-btn">Add to Cart</button>
                </div>
              </div>
            </div>
          `;

          tableBody.innerHTML += rowHTML;
        });
      }

      // Function to handle category filtering
      function filterCategory() {
        const selectedCategory = document.getElementById("categories").value;
        const urlParams = new URLSearchParams(window.location.search);

        if (selectedCategory === "all") {
          urlParams.delete("categories_ID");
        } else {
          urlParams.set("categories_ID", selectedCategory);
        }

        // Reload the page with updated category parameter
        window.location.search = urlParams.toString();
      }

      loadSheetData();
    </script> -->

      <script>
        // Fetch data based on category from URL
        async function loadSheetData(categoryID) {
          const sheetID = "1XVbrA6eUv85eOoJO6mziJ35LI8x2copV_ka7qil2ycU"; // Replace with your Sheet ID
          const apiKey = "AIzaSyD7mumdGgofUc1DE_bgaYJtOKK4i421iA8"; // Replace with your Google API Key
          const range2 = "Sheet1!Y5:AF";
          const range = "Sheet1!A5:V";

          const url2 = `https://sheets.googleapis.com/v4/spreadsheets/${sheetID}/values/${range2}?key=${apiKey}`;
          const url = `https://sheets.googleapis.com/v4/spreadsheets/${sheetID}/values/${range}?key=${apiKey}`;

          try {
            const response2 = await fetch(url2);
            const data2 = await response2.json();
            const response = await fetch(url);
            const data = await response.json();

            if (!data.values || !data2.values) {
              throw new Error("No data found in the specified range.");
            }

            const rows = data.values;
            const row2 = data2.values;

            const tableBody = document.getElementById("product-grid");
            const loadingMessage = document.getElementById("loading-message");

            loadingMessage.innerText = "LOADING PRODUCTS...";

            // Filter rows based on the selected category ID
            const filteredRows =
              categoryID && categoryID !== "all"
                ? rows.filter((row) => row[1] === categoryID)
                : rows;

            tableBody.innerHTML = ""; // Clear the previous data

            if (filteredRows.length === 0) {
              tableBody.innerHTML = `<p>No products found for the selected category.</p>`;
              loadingMessage.style.display = "none";
              return;
            }

            displayBatch(filteredRows, row2, 0, 20, tableBody);

            let start = 20;
            while (start < filteredRows.length) {
              loadingMessage.innerText = `LOADING NEXT 20 PRODUCTS (${
                start + 1
              }/${filteredRows.length})...`;
              await new Promise((resolve) => setTimeout(resolve, 500)); // Simulate delay for smoother loading
              displayBatch(filteredRows, row2, start, start + 20, tableBody);
              start += 20;
            }

            loadingMessage.style.display = "none"; // Hide loading message when all rows are loaded
          } catch (error) {
            console.error("Error fetching data:", error);
          }
        }

        // Display a batch of rows
        function displayBatch(rows, row2, start, end, tableBody) {
          const batch = rows.slice(start, end);

          batch.forEach((row) => {
            const productID = row[0];
            let price = 0;

            row2.forEach((r2) => {
              if (r2[1] === row[0]) {
                price = r2[6];
              }
            });

            const rowHTML = `
            <div class="product-card medicine-card ${row[1] || "all"}">
  <div class="card-front">
    <img src="${row[15] || ""}" alt="Product Image" />
    <div class="product-details">
      <h3>${row[2] || "No Description"}</h3>
      <p class="price">${price || "Price not available"}</p>
      <div class="product-buttons">
        <button class="buy-btn"><a href="./product_overview.html?product_ID=${productID}">Buy</a></button>
        <button class="cart-btn">Add to Cart</button>
      </div>
    </div>
  </div>
  <div class="card-back">

    <p>${row[3]}</p>
    
    <button class="buy-btn"><a href="./product_overview.html?product_ID=${productID}">Buy Now</a></button>
  </div>
</div>
          `;

            tableBody.innerHTML += rowHTML;
          });
        }

        // Function to handle category filtering
        function filterCategory() {
          const selectedCategory = document.getElementById("categories").value;

          // Update the data dynamically without reloading
          loadSheetData(selectedCategory);
        }

        // Load data on initial page load
        const urlParams = new URLSearchParams(window.location.search);
        const initialCategoryID = urlParams.get("catogeries_ID") || "all";

        // Pre-select the category in the dropdown based on the URL
        document.getElementById("categories").value = initialCategoryID;

        // Load data for the initial category
        loadSheetData(initialCategoryID);
      </script>

      <!-- Add more product cards as needed -->
    </section>
    <div id="loading-message" class="loading-message">LOADING...</div>

    <footer class="footer">
      <div class="footer-content">
        <div class="footer-section resources">
          <h3>Resources</h3>
          <ul>
            <li><a href="#">Shipping</a></li>
            <li><a href="#">Returns & Refunds</a></li>
            <li><a href="#">Payment Methods</a></li>
            <li><a href="#">FAQs</a></li>
          </ul>
        </div>
        <div class="footer-section legal">
          <h3>Legal</h3>
          <ul>
            <li><a href="#">About Us</a></li>
            <li><a href="#">Contact Us</a></li>
            <li><a href="#">Terms & Conditions</a></li>
            <li><a href="#">Privacy Policy</a></li>
            <li><a href="#">Cancellation Policy</a></li>
          </ul>
        </div>
        <div class="footer-section support">
          <h3>Support 24/7</h3>
          <p><i class="fa fa-envelope"></i> support@mclandpharma.com</p>
          <p><i class="fa fa-phone"></i> +1 315 666 5976</p>
        </div>
        <div class="footer-section disclaimer">
          <h3>Disclaimer</h3>
          <p>
            The services on Mcland Pharma are available for millions of people
            solely presented for informative, qualitative, quantitative, and
            affordable medicinal purposes. Here we believe The Doctor’s advice =
            The Best Advice for medicinal needs by following protocol
            accordingly by people suffering from different conditions.
          </p>
        </div>
      </div>
      <div class="footer-bottom">
        <div class="footer-left">
          <p class="copyright">
            &copy; 2024 Mcland Pharma. All rights reserved.
          </p>
          <p>© 2024 All rights reserved. Mcland Pharma</p>
          <p>
            Mcland Pharma has been working on a change towards healthcare and
            improving health. We are on a mission Encouraging Healthcare –
            Improving Health since 2013. We have covered the finest medicines
            for the mission towards cure with a few simple steps at
            budget-friendly prices.
          </p>
        </div>
        <div class="footer-right">
          <h3>Payment modes</h3>
          <div class="payment-icons">
            <img src="./assets/image/cash_app.png" alt="Cash App" />
            <img src="./assets/image/zelle.png" alt="Zelle" />
            <img src="./assets/image/venmo.png" alt="Venmo" />
            <!-- <img src="./assets/image/apple_pay.png" alt="Apple Pay">
              <img src="./assets/image/Gpay.png" alt="Google Pay"> -->
            <img src="./assets/image/pay_pal.jpg" alt="Paypal" />
            <!-- <img src="./assets/image/wire_transfer.png" alt="Wire Transfer"> -->
            <img src="./assets/image/bitcoin.png" alt="Bitcoin" />
          </div>
        </div>
      </div>
    </footer>

    <script>
      document.querySelectorAll(".navbar-bottom li").forEach((item) => {
        item.addEventListener("click", function (e) {
          const dropdown = this.querySelector(".dropdown");
          if (dropdown) {
            e.stopPropagation(); // Prevents clicks from propagating to other elements
            dropdown.style.display =
              dropdown.style.display === "block" ? "none" : "block";
          }
        });

        item.addEventListener("mouseover", function () {
          const dropdown = this.querySelector(".dropdown");
          if (dropdown) {
            dropdown.style.display = "block";
          }
        });

        item.addEventListener("mouseout", function () {
          const dropdown = this.querySelector(".dropdown");
          if (dropdown) {
            dropdown.style.display = "none";
          }
        });
      });

      // Close dropdowns when clicking outside
      document.addEventListener("click", () => {
        document.querySelectorAll(".dropdown").forEach((dropdown) => {
          dropdown.style.display = "none";
        });
      });
    </script>
    <script src="./assets/js/categories.js"></script>
  </body>
</html>
